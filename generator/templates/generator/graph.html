<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
<style type="text/css">

        html{
            margin: 10px;
        }

</style>
<h2>Сгенерированный граф:</h2>
<table class="table">
    {% for graph_t in output %}
    {% for graph in graph_t %}
    <tr>
        <td width="15%">
            <table width="100%" border="1px solid black">
                <tbody >
                    <tr>
                        <td>&nbsp&nbsp&nbsp</td>
                        {% for x in graph.m %}
                            <td>x<sub>{{ forloop.counter }}</sub></td>
                        {% endfor %}

                    </tr>
                    {% for x in graph.m %}
                        <tr align="center">
                            <td>x<sub>{{ forloop.counter }}</sub></td>
                            {% for y in x %}
                                <td align="center" >
                                    {% if y != inf %}
                                        {{ y }}
                                    {% else %}
                                        &nbsp&nbsp&nbsp
                                    {% endif %}
                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </td>
        <td>
            Ответ:
            {% if type %}
            {% for vert in graph.each_way %}
                (
                {% for index in vert.seq %}
                    {% if forloop.counter0 %}
                        ,&nbsp
                    {% endif %}
                    x<sub>{{ index }}</sub>
                {% endfor %}
                ); {{ vert.len }}<br>
            {% endfor %}
            {% endif %}
            {% for my_ans in graph.ans %}
                (
                {% for index in my_ans %}
                    {% if forloop.counter0 %}
                        ,&nbsp
                    {% endif %}
                    x<sub>{{ index }}</sub>
                {% endfor %}
                ); {{ graph.way }}<br>
            {% endfor %}
        </td>
    </tr>
{% endfor %}
{% endfor %}
</table>
<button id="convert">Сохранить как jpeg</button>
      <div id="result">
         <!-- Result will appear be here -->
      </div>
<br>
<a href="{% url 'home' %}" class="btn btn-primary">К параметрам</a>
<script type="text/javascript" src="https://github.com/niklasvh/html2canvas/releases/download/0.5.0-alpha1/html2canvas.js"></script>
      <script>
         //convert table to image
         function convertToImage() {
            var my_tables = document.getElementsByTagName("table")
            var resultDiv = document.getElementById("result");
            for (var i = 0; i < my_tables.length; i++){
                html2canvas(my_tables[i], {
                    onrendered: function(canvas) {
                        var img = canvas.toDataURL("image/png");
                        result.innerHTML = '<a download="Graph.jpeg" href="'+img+'">Скачать</a>';
                        }
                });
            }
         }
         //click event
         var convertBtn = document.getElementById("convert");
         convertBtn.addEventListener('click', convertToImage);
      </script>